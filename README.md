# uniform-fe - ä¸€ä½“åŒ–è¡¨å•ç®¡ç†å¹³å°

> åŸºäº React + Umi + TypeScript + Ant Design çš„ä¼ä¸šçº§æ¸¯å£èˆªè¿è¡¨å•ç®¡ç†ç³»ç»Ÿ

## ğŸ“– é¡¹ç›®ç®€ä»‹

uniform-fe æ˜¯ä¸€ä¸ªä¸“ä¸ºæ¸¯å£èˆªè¿è¡Œä¸šè®¾è®¡çš„ä¸€ä½“åŒ–è¡¨å•ç®¡ç†å¹³å°ï¼Œæä¾›å®Œæ•´çš„è¡¨å•æ¨¡æ¿è®¾è®¡ã€å®ä¾‹ç®¡ç†ã€æ–‡æ¡£å¤„ç†å’Œæµç¨‹å®¡æ‰¹åŠŸèƒ½ã€‚ç³»ç»Ÿæ”¯æŒåŒ–å·¥ã€ç…¤ç›ç­‰å¤šç§ä¸šåŠ¡åœºæ™¯ï¼Œå…·å¤‡å¼ºå¤§çš„åŠ¨æ€è¡¨å•å¼•æ“å’Œç‰ˆæœ¬æ§åˆ¶æœºåˆ¶ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ¨ **åŠ¨æ€è¡¨å•å¼•æ“** - æ”¯æŒå˜é‡åŒ–è¡¨å•è®¾è®¡å’ŒåŠ¨æ€æ¸²æŸ“ï¼ŒåŒ…å«å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
- ğŸ“‹ **æ¨¡æ¿ç‰ˆæœ¬æ§åˆ¶** - å®Œå–„çš„è¡¨å•æ¨¡æ¿å’Œæ–‡æ¡£æ¨¡æ¿ç‰ˆæœ¬ç®¡ç†
- ğŸ” **ç»†ç²’åº¦æƒé™** - åŸºäºèœå•ä»£ç çš„æƒé™æ§åˆ¶ï¼Œæ”¯æŒä¸šåŠ¡çº¿éš”ç¦»
- ğŸ”” **æ™ºèƒ½é€šçŸ¥ç³»ç»Ÿ** - çµæ´»çš„é€šçŸ¥é…ç½®æ—¶æœºå’Œå®Œæ•´çš„å›æ‰§è®°å½•
- ğŸ“Š **æ•°æ®å¯è§†åŒ–** - åŸºäº @antv/l7 çš„åœ°ç†å¯è§†åŒ–å±•ç¤º
- ğŸš€ **å¯Œæ–‡æœ¬ç¼–è¾‘** - é›†æˆ Quill ç¼–è¾‘å™¨ï¼Œæ”¯æŒè¡¨æ ¼å’Œè‡ªå®šä¹‰å˜é‡æ’å…¥
- ğŸ“± **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯è®¿é—®
- ğŸ­ **è¡Œä¸šå®šåˆ¶** - ä¸“ä¸ºæ¸¯å£èˆªè¿è¡Œä¸šè®¾è®¡ï¼ŒåŒ…å«èˆ¹èˆ¶ä½œä¸šã€å®‰å…¨æ£€æŸ¥ç­‰ä¸šåŠ¡æ¨¡å—

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| React | 18.2.0 | UI æ¡†æ¶ |
| Umi Max | 4.1.0 | ä¼ä¸šçº§åº”ç”¨æ¡†æ¶ |
| TypeScript | 4.9.5 | ç±»å‹ç³»ç»Ÿ |
| Ant Design | 5.12.7 | UI ç»„ä»¶åº“ |
| Pro Components | 2.6.44 | é«˜çº§ä¸šåŠ¡ç»„ä»¶ |
| @antv/l7 | 2.20.13 | åœ°ç†å¯è§†åŒ–å¼•æ“ |
| Quill | 2.0.2 | å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ |
| dayjs | latest | æ—¥æœŸå¤„ç† |
| axios | latest | HTTP å®¢æˆ·ç«¯ |

### æ¡†æ¶ç‰¹æ€§

- **Umi Max** - å¼€ç®±å³ç”¨çš„ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ
- **å›½é™…åŒ–** - æ”¯æŒ i18next å¤šè¯­è¨€
- **æƒé™æ§åˆ¶** - åŸºäº initialState çš„æƒé™ç³»ç»Ÿ
- **æ•°æ®æµç®¡ç†** - å†…ç½® Model çŠ¶æ€ç®¡ç†
- **OpenAPI é›†æˆ** - è‡ªåŠ¨ç”Ÿæˆ API æœåŠ¡å±‚
- **Mock æ”¯æŒ** - å®Œæ•´çš„å¼€å‘ç¯å¢ƒ Mock æ•°æ®

### å…³é”®è‡ªå®šä¹‰ç»„ä»¶

- **SuperTable** - æ”¯æŒåˆ—é…ç½®æœ¬åœ°å­˜å‚¨çš„é«˜çº§è¡¨æ ¼ç»„ä»¶
- **DynamicForm** - åŠ¨æ€è¡¨å•ç»„ä»¶ï¼Œæ”¯æŒå¤šç§è¾“å…¥ç±»å‹å’Œæ¡ä»¶æ¸²æŸ“
- **SuperRichTextEditor** - å¢å¼ºçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ”¯æŒå˜é‡æ’å…¥å’Œè¡¨æ ¼
- **FormVarConfig** - è¡¨å•å˜é‡é…ç½®ç»„ä»¶
- **SubQuestion** - å­é—®é¢˜æ¨¡æ¿ç®¡ç†ç»„ä»¶

## ğŸ“ é¡¹ç›®ç»“æ„

```
op-fe-66/
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.ts             # Umi ä¸»é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ routes.ts             # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ proxy.ts              # ä»£ç†é…ç½®
â”‚   â”œâ”€â”€ defaultSettings.ts    # å¸ƒå±€é»˜è®¤é…ç½®
â”‚   â””â”€â”€ oneapi.json           # OpenAPI è§„èŒƒæ–‡ä»¶
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ form-template-refactor.md    # æ¨¡æ¿ç³»ç»Ÿé‡æ„æ–¹æ¡ˆ
â”‚   â””â”€â”€ generic-data-model.md        # é€šç”¨æ•°æ®æ¨¡å‹è®¾è®¡
â”œâ”€â”€ mock/                      # Mock æ•°æ®
â”œâ”€â”€ public/                    # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ .umi/                 # Umi ç”Ÿæˆæ–‡ä»¶ï¼ˆè‡ªåŠ¨ï¼‰
â”‚   â”œâ”€â”€ common/               # é€šç”¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ api/             # API æ¥å£å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ form/        # è¡¨å•ç›¸å…³ API
â”‚   â”‚   â”‚   â”œâ”€â”€ template/    # æ¨¡æ¿ç›¸å…³ API
â”‚   â”‚   â”‚   â”œâ”€â”€ system/      # ç³»ç»Ÿç®¡ç† API
â”‚   â”‚   â”‚   â”œâ”€â”€ notification/# é€šçŸ¥ç›¸å…³ API
â”‚   â”‚   â”‚   â””â”€â”€ operation/   # ä¸šåŠ¡æ“ä½œ API
â”‚   â”‚   â”œâ”€â”€ service/         # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ data_type/       # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ code_list/       # ä»£ç è¡¨/æšä¸¾
â”‚   â”‚   â””â”€â”€ path_util.ts     # è·¯å¾„å·¥å…·
â”‚   â”œâ”€â”€ components/           # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ common/          # é€šç”¨ç»„ä»¶ (SuperTable, DynamicForm)
â”‚   â”‚   â”œâ”€â”€ document_step/   # æ–‡æ¡£æ­¥éª¤ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ form_var_config/ # è¡¨å•å˜é‡é…ç½®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ form_var_value/  # è¡¨å•å˜é‡å€¼ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ send_config/     # å‘é€é…ç½®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ send_history/    # å‘é€å†å²ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ sub_question/    # å­é—®é¢˜ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ table_column_config/ # è¡¨æ ¼åˆ—é…ç½®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ text_editor/     # å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ (SuperRichTextEditor)
â”‚   â”‚   â”œâ”€â”€ Footer/          # é¡µè„šç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ RightContent/    # é¡¶éƒ¨å³ä¾§å†…å®¹
â”‚   â”‚   â””â”€â”€ HeaderDropdown/  # å¤´éƒ¨ä¸‹æ‹‰èœå•
â”‚   â”œâ”€â”€ lang/                 # å›½é™…åŒ–
â”‚   â”‚   â””â”€â”€ zh/              # ä¸­æ–‡ç¿»è¯‘
â”‚   â”œâ”€â”€ locales/              # Umi å›½é™…åŒ–
â”‚   â”‚   â””â”€â”€ zh-CN/           # ä¸­æ–‡èµ„æº
â”‚   â”œâ”€â”€ pages/                # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ form/            # è¡¨å•ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ form/        # è¡¨å•å®ä¾‹
â”‚   â”‚   â”‚   â”œâ”€â”€ document/    # ä¸€ä½“åŒ–æ–‡æ¡£
â”‚   â”‚   â”‚   â”œâ”€â”€ form_section/    # è¡¨å•åŒºå—
â”‚   â”‚   â”‚   â”œâ”€â”€ form_question/   # è¡¨å•é—®é¢˜
â”‚   â”‚   â”‚   â””â”€â”€ ship_operation_document/ # èˆ¹èˆ¶ä½œä¸šæ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ template/        # æ¨¡æ¿ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ form_template/           # è¡¨å•æ¨¡æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ form_template_version/   # è¡¨å•æ¨¡æ¿ç‰ˆæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ document_template/       # æ–‡æ¡£æ¨¡æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ document_template_version/ # æ–‡æ¡£æ¨¡æ¿ç‰ˆæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ document_template_rule/  # æ–‡æ¡£æ¨¡æ¿è§„åˆ™
â”‚   â”‚   â”‚   â”œâ”€â”€ form_section_template/   # åŒºå—æ¨¡æ¿
â”‚   â”‚   â”‚   â””â”€â”€ form_question_template/  # é—®é¢˜æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ operation/       # ä¸šåŠ¡æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ ship_operation_document/ # èˆ¹èˆ¶ä½œä¸š
â”‚   â”‚   â”‚   â”œâ”€â”€ monthly_security_check/  # æœˆåº¦å®‰å…¨æ£€æŸ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ security_declare/        # ä¿å®‰å£°æ˜
â”‚   â”‚   â”‚   â””â”€â”€ yuancang_operaton/       # åœ†ä»“ä½œä¸š
â”‚   â”‚   â”œâ”€â”€ system/          # ç³»ç»Ÿç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ user/        # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ user_permission/ # ç”¨æˆ·æƒé™
â”‚   â”‚   â”‚   â”œâ”€â”€ user_history/    # ç”¨æˆ·å†å²
â”‚   â”‚   â”‚   â”œâ”€â”€ internal_org/    # å†…éƒ¨ç»„ç»‡
â”‚   â”‚   â”‚   â”œâ”€â”€ receipt_org/     # æ¥æ”¶å•ä½
â”‚   â”‚   â”‚   â””â”€â”€ turn_group_schedule/ # è½®ç­è°ƒåº¦
â”‚   â”‚   â”œâ”€â”€ notification/    # é€šçŸ¥ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ notification_config/  # é€šçŸ¥é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ notification_history/ # é€šçŸ¥å†å²
â”‚   â”‚   â”œâ”€â”€ account/         # è´¦æˆ·ç›¸å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ center/      # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â”‚   â””â”€â”€ settings/    # ä¸ªäººè®¾ç½®
â”‚   â”‚   â””â”€â”€ user/            # ç”¨æˆ·é¡µé¢
â”‚   â”‚       â”œâ”€â”€ login/       # ç™»å½•
â”‚   â”‚       â”œâ”€â”€ register/    # æ³¨å†Œ
â”‚   â”‚       â””â”€â”€ register-result/ # æ³¨å†Œç»“æœ
â”‚   â”œâ”€â”€ app.tsx               # è¿è¡Œæ—¶é…ç½®
â”‚   â”œâ”€â”€ access.ts             # æƒé™å®šä¹‰
â”‚   â”œâ”€â”€ axios.ts              # Axios å®ä¾‹é…ç½®
â”‚   â”œâ”€â”€ global.tsx            # å…¨å±€åˆå§‹åŒ–
â”‚   â”œâ”€â”€ global.style.ts       # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ requestErrorConfig.ts # è¯·æ±‚é”™è¯¯é…ç½®
â”œâ”€â”€ types/                     # å…¨å±€ç±»å‹å®šä¹‰
â”œâ”€â”€ .editorconfig             # ç¼–è¾‘å™¨é…ç½®
â”œâ”€â”€ .eslintrc.js              # ESLint é…ç½®
â”œâ”€â”€ .prettierrc.js            # Prettier é…ç½®
â”œâ”€â”€ .gitignore                # Git å¿½ç•¥é…ç½®
â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
â”œâ”€â”€ package.json              # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ pnpm-lock.yaml            # pnpm é”å®šæ–‡ä»¶
â”œâ”€â”€ jest.config.ts            # Jest æµ‹è¯•é…ç½®
â”œâ”€â”€ CLAUDE.md                 # Claude é¡¹ç›®ç†è§£è®°å½•
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 12.0.0
- pnpm (æ¨è) æˆ– npm/yarn

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### å¼€å‘æ¨¡å¼

```bash
# å¼€å‘ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰
pnpm dev
pnpm start:dev

# æµ‹è¯•ç¯å¢ƒ
pnpm start:test

# é¢„å‘å¸ƒç¯å¢ƒ
pnpm start:pre

# æ—  Mock æ¨¡å¼
pnpm start:no-mock
```

è®¿é—®: http://localhost:8000

### æ„å»º

```bash
# ç”Ÿäº§æ„å»º
pnpm build

# æ„å»ºå¹¶åˆ†æ
pnpm analyze

# é¢„è§ˆæ„å»ºäº§ç‰©
pnpm preview
```

### ä»£ç è´¨é‡

```bash
# ä»£ç æ£€æŸ¥
pnpm lint

# è‡ªåŠ¨ä¿®å¤
pnpm lint:fix

# ä»£ç æ ¼å¼åŒ–
pnpm prettier

# TypeScript ç±»å‹æ£€æŸ¥
pnpm tsc

# è¿è¡Œæµ‹è¯•
pnpm test

# æµ‹è¯•è¦†ç›–ç‡
pnpm test:coverage
```

### OpenAPI

```bash
# æ ¹æ® OpenAPI è§„èŒƒç”ŸæˆæœåŠ¡ä»£ç 
pnpm openapi
```

## ğŸ”‘ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. è¡¨å•ç³»ç»Ÿ

**è¡¨å•å®ä¾‹ç®¡ç†**
- æ”¯æŒåˆ›å»ºã€ç¼–è¾‘ã€æŸ¥çœ‹è¡¨å•
- è¡¨å•æµç¨‹æ§åˆ¶å’ŒçŠ¶æ€ç®¡ç†
- æ”¯æŒæ‰“å°å’Œå¯¼å‡ºåŠŸèƒ½
- è¡¨å•åˆ†äº«å’Œåä½œ

**è¡¨å•ç»„ä»¶**
- æ–‡æœ¬è¾“å…¥ã€æ•°å­—è¾“å…¥ã€æ—¥æœŸé€‰æ‹©å™¨
- å•é€‰ã€å¤šé€‰ã€ä¸‹æ‹‰é€‰æ‹©
- æ–‡ä»¶ä¸Šä¼ ã€å›¾ç‰‡ä¸Šä¼ 
- ç­¾åæ¿ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
- åŠ¨æ€è¡¨æ ¼ã€å­è¡¨å•

**æ•°æ®ç»“æ„**
```typescript
interface DocumentType {
  documentId: string;
  documentTemplateId: number;
  documentTemplateVersionId: number;
  documentNo: string;
  templateName: string;
  currentStep: string;
  fillinStatus: string;
  viewerList: string;
  editorList: string;
  varValueList: string;
}
```

### 2. æ¨¡æ¿ç³»ç»Ÿ

**æ¨¡æ¿è®¾è®¡å™¨**
- å¯è§†åŒ–è¡¨å•è®¾è®¡
- æ‹–æ‹½å¼ç»„ä»¶å¸ƒå±€
- å®æ—¶é¢„è§ˆ
- æ¨¡æ¿å¤åˆ¶å’Œç»§æ‰¿

**ç‰ˆæœ¬æ§åˆ¶**
- æ¨¡æ¿ç‰ˆæœ¬ç®¡ç†
- ç‰ˆæœ¬å‘å¸ƒå’Œå›æ»š
- ç‰ˆæœ¬å¯¹æ¯”
- å˜æ›´å†å²è®°å½•

**ä¸šåŠ¡è§„åˆ™**
- å­—æ®µéªŒè¯è§„åˆ™
- æ¡ä»¶æ˜¾ç¤ºé€»è¾‘
- è‡ªåŠ¨è®¡ç®—
- æ•°æ®è”åŠ¨

### 3. é€šçŸ¥ç³»ç»Ÿ

**é€šçŸ¥é…ç½®**
- å¤šç§é€šçŸ¥æ—¶æœºï¼ˆåˆ›å»ºã€æäº¤ã€å®¡æ‰¹ç­‰ï¼‰
- å¤šç§é€šçŸ¥æ–¹å¼ï¼ˆç«™å†…ä¿¡ã€é‚®ä»¶ã€çŸ­ä¿¡ï¼‰
- é€šçŸ¥å¯¹è±¡é…ç½®
- é€šçŸ¥æ¨¡æ¿å®šåˆ¶

**é€šçŸ¥å†å²**
- é€šçŸ¥å‘é€è®°å½•
- é˜…è¯»å›æ‰§
- é‡å‘æœºåˆ¶
- ç»Ÿè®¡åˆ†æ

### 4. ç³»ç»Ÿç®¡ç†

**ç”¨æˆ·ç®¡ç†**
- ç”¨æˆ·ä¿¡æ¯ç»´æŠ¤
- è§’è‰²æƒé™åˆ†é…
- ç”µå­ç­¾åç®¡ç†
- å°ç« ç®¡ç†
- æ“ä½œæ—¥å¿—

**ç»„ç»‡ç®¡ç†**
- å†…éƒ¨ç»„ç»‡æ¶æ„
- å¤–éƒ¨æ¥æ”¶å•ä½
- ç»„ç»‡å±‚çº§å…³ç³»
- è½®ç­è°ƒåº¦

**æƒé™æ§åˆ¶**
```typescript
// æƒé™é…ç½®ç¤ºä¾‹
access: {
  hasMeiyan: true,    // ç…¤ç›ä¸šåŠ¡æƒé™
  hasHuagong: true,   // åŒ–å·¥ä¸šåŠ¡æƒé™
  hasSystem: true,    // ç³»ç»Ÿç®¡ç†æƒé™
  hasTemplate: true,  // æ¨¡æ¿ç®¡ç†æƒé™
  hasForm: true,      // è¡¨å•ç®¡ç†æƒé™
}
```

### 5. ä¸šåŠ¡æ“ä½œæ¨¡å—

**èˆ¹èˆ¶ä½œä¸šç®¡ç†**
- åŒ–å·¥èˆ¹èˆ¶ä½œä¸š
- ç…¤ç›èˆ¹èˆ¶ä½œä¸š
- ä½œä¸šæµç¨‹è·Ÿè¸ª
- ä½œä¸šæ–‡æ¡£ç®¡ç†

**å®‰å…¨æ£€æŸ¥**
- æœˆåº¦å®‰å…¨æ£€æŸ¥
- ä¿å®‰å£°æ˜
- æ£€æŸ¥é¡¹é…ç½®
- æ•´æ”¹è·Ÿè¸ª

**ä»“å‚¨ä½œä¸š**
- åœ†ä»“ä½œä¸šç®¡ç†
- ä½œä¸šè®¡åˆ’
- ä½œä¸šè®°å½•
- ç»Ÿè®¡æŠ¥è¡¨

## ğŸ¨ è®¾è®¡è§„èŒƒ

### ä¸»é¢˜é…ç½®

```typescript
{
  navTheme: 'light',
  colorPrimary: '#1890ff',
  layout: 'mix',
  splitMenus: true,
  siderMenuType: 'group',
  fixedHeader: false,
  fixSiderbar: true
}
```

### è·¯ç”±é…ç½®

- Hash è·¯ç”±æ¨¡å¼
- åŸºäºé…ç½®çš„è·¯ç”±ç³»ç»Ÿ
- æ”¯æŒåµŒå¥—è·¯ç”±
- æƒé™è·¯ç”±æ§åˆ¶
- åŠ¨æ€é¢åŒ…å±‘

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| REACT_APP_ENV | è¿è¡Œç¯å¢ƒ | dev |
| UMI_ENV | Umi ç¯å¢ƒ | dev |
| MOCK | Mock å¼€å…³ | é»˜è®¤å¼€å¯ |
| NODE_ENV | Node ç¯å¢ƒ | development |

### ä»£ç†é…ç½®

å¼€å‘ç¯å¢ƒä»£ç†é…ç½® (`config/proxy.ts`):

```typescript
dev: {
  '/api/': {
    target: 'http://127.0.0.1:6800',
    changeOrigin: true,
  }
}
```

æµ‹è¯•ç¯å¢ƒ:
```typescript
test: {
  '/api/': {
    target: 'https://gw.66yunliantest.cn/form-backend/',
    changeOrigin: true
  }
}
```

### CDN é…ç½®

ç”Ÿäº§ç¯å¢ƒ: `//g.66yunliancdn.cn/${projectName}/${projectVersion}/`
æµ‹è¯•ç¯å¢ƒ: `//g.66yunliantest.cn/${projectName}/${projectVersion}/`

## ğŸ“Š æ•°æ®æµæ¶æ„

### API å±‚
```
src/common/api/
â”œâ”€â”€ form/          # è¡¨å• API
â”œâ”€â”€ template/      # æ¨¡æ¿ API
â”œâ”€â”€ system/        # ç³»ç»Ÿ API
â”œâ”€â”€ notification/  # é€šçŸ¥ API
â””â”€â”€ operation/     # ä¸šåŠ¡ API
```

### æœåŠ¡å±‚
```
src/common/service/
â”œâ”€â”€ form/          # è¡¨å•ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ template/      # æ¨¡æ¿ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ system/        # ç³»ç»Ÿä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ notification/  # é€šçŸ¥ä¸šåŠ¡é€»è¾‘
â””â”€â”€ operation/     # ä¸šåŠ¡æ“ä½œé€»è¾‘
```

### ç±»å‹å®šä¹‰
```
src/common/data_type/
â”œâ”€â”€ form/          # è¡¨å•ç±»å‹
â”œâ”€â”€ template/      # æ¨¡æ¿ç±»å‹
â”œâ”€â”€ system/        # ç³»ç»Ÿç±»å‹
â”œâ”€â”€ notification/  # é€šçŸ¥ç±»å‹
â””â”€â”€ operation/     # ä¸šåŠ¡ç±»å‹
```

## ğŸ” æƒé™ç³»ç»Ÿ

### æƒé™æ¨¡å‹

åŸºäº `initialState` çš„æƒé™æ§åˆ¶:

```typescript
// src/access.ts
export default function access(initialState) {
  const { currentUser } = initialState;
  return {
    hasMeiyan: currentUser,
    hasHuagong: currentUser,
    hasSystem: currentUser,
    hasTemplate: currentUser,
    hasForm: currentUser,
  };
}
```

### è·¯ç”±æƒé™

```typescript
{
  path: '/template',
  access: "hasTemplate",
  routes: [...]
}
```

## ğŸ§ª æµ‹è¯•

### å•å…ƒæµ‹è¯•

```bash
pnpm test
```

### E2E æµ‹è¯•

```bash
pnpm test:e2e
```

### æµ‹è¯•è¦†ç›–ç‡

```bash
pnpm test:coverage
```

## ğŸ“¦ éƒ¨ç½²

### æ„å»ºäº§ç‰©

```
dist/
â”œâ”€â”€ index.html
â”œâ”€â”€ umi.js
â”œâ”€â”€ umi.css
â””â”€â”€ static/
```

### éƒ¨ç½²å‘½ä»¤

```bash
# æ„å»º
pnpm build

# éƒ¨ç½²ï¼ˆä½¿ç”¨å†…ç½®å·¥å…·ï¼‰
pnpm deploy
```

### Nginx é…ç½®ç¤ºä¾‹

```nginx
server {
  listen 80;
  server_name your-domain.com;
  root /path/to/dist;

  location / {
    try_files $uri $uri/ /index.html;
  }

  location /api {
    proxy_pass http://backend:6800;
    proxy_set_header X-Real-IP $remote_addr;
  }
}
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/pages/` ä¸‹åˆ›å»ºé¡µé¢ç»„ä»¶
2. åœ¨ `config/routes.ts` ä¸­æ·»åŠ è·¯ç”±é…ç½®
3. åœ¨å›½é™…åŒ–æ–‡ä»¶ä¸­æ·»åŠ èœå•ç¿»è¯‘
4. é…ç½®æƒé™ï¼ˆå¦‚éœ€è¦ï¼‰

### æ·»åŠ æ–° API

1. åœ¨ `src/common/api/` å¯¹åº”æ¨¡å—ä¸‹æ·»åŠ  API å®šä¹‰
2. åœ¨ `src/common/service/` ä¸‹å®ç°ä¸šåŠ¡é€»è¾‘
3. åœ¨ `src/common/data_type/` ä¸‹æ·»åŠ ç±»å‹å®šä¹‰
4. åœ¨é¡µé¢ä¸­ä½¿ç”¨

### è‡ªå®šä¹‰ç»„ä»¶

1. åœ¨ `src/components/` ä¸‹åˆ›å»ºç»„ä»¶
2. åœ¨ `src/components/index.ts` ä¸­å¯¼å‡º
3. åœ¨é¡µé¢ä¸­å¼•å…¥ä½¿ç”¨

## ğŸ¤ è´¡çŒ®æŒ‡å—

### åˆ†æ”¯ç®¡ç†

- `master` - ä¸»åˆ†æ”¯ï¼Œç”Ÿäº§ç¯å¢ƒä»£ç 
- `develop` - å¼€å‘åˆ†æ”¯
- `feature/*` - åŠŸèƒ½åˆ†æ”¯
- `hotfix/*` - ç´§æ€¥ä¿®å¤åˆ†æ”¯

### æäº¤è§„èŒƒ

ä½¿ç”¨ Conventional Commits è§„èŒƒ:

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
perf: æ€§èƒ½ä¼˜åŒ–
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·é“¾ç›¸å…³
```

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥
- ä½¿ç”¨ Prettier è¿›è¡Œä»£ç æ ¼å¼åŒ–
- TypeScript ä¸¥æ ¼æ¨¡å¼
- ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹
- Hooks ä¼˜å…ˆäº Class

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

1. ä½¿ç”¨ `pnpm` ä½œä¸ºåŒ…ç®¡ç†å™¨
2. æäº¤å‰è¿è¡Œ `pnpm lint` æ£€æŸ¥ä»£ç 
3. éµå¾ª TypeScript ç±»å‹çº¦æŸ
4. ç»„ä»¶å‘½åä½¿ç”¨ PascalCase
5. æ–‡ä»¶å‘½åä½¿ç”¨ snake_case (ä¸šåŠ¡æ–‡ä»¶) æˆ– kebab-case (é€šç”¨æ–‡ä»¶)
6. é¿å…ä½¿ç”¨ `any` ç±»å‹
7. åŠæ—¶æ›´æ–° CLAUDE.md é¡¹ç›®ç†è§£æ–‡æ¡£

## ğŸ› å·²çŸ¥é—®é¢˜

1. éƒ¨åˆ†é¡µé¢åœ¨ IE11 ä¸‹å…¼å®¹æ€§é—®é¢˜
2. å¤§æ•°æ®é‡è¡¨æ ¼æ€§èƒ½ä¼˜åŒ–å¾…æå‡
3. ç§»åŠ¨ç«¯éƒ¨åˆ†äº¤äº’ä½“éªŒå¾…ä¼˜åŒ–

## ğŸ“… ç‰ˆæœ¬å†å²

### v6.0.51-beta.2 (å½“å‰ç‰ˆæœ¬)
- è¡¨å•æ¨¡æ¿ç³»ç»Ÿé‡æ„
- é€šç”¨æ•°æ®æ¨¡å‹è®¾è®¡
- æ€§èƒ½ä¼˜åŒ–å’Œ Bug ä¿®å¤

### æœªæ¥è®¡åˆ’
- [ ] è¡¨å•æ„å»ºå™¨å¯è§†åŒ–å¢å¼º
- [ ] ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–
- [ ] å¤šç§Ÿæˆ·æ”¯æŒ
- [ ] å·¥ä½œæµå¼•æ“é›†æˆ
- [ ] æ•°æ®åˆ†æå’ŒæŠ¥è¡¨åŠŸèƒ½

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **å¼€å‘å›¢é˜Ÿ**: ä¸­åŒ–æ¸¯å£å›¢é˜Ÿ
- **ä½œè€…**: wwl
- **æŠ€æœ¯æ ˆ**: React + Umi + TypeScript + Ant Design

## ğŸ“„ è®¸å¯è¯

Private - ä¼ä¸šå†…éƒ¨é¡¹ç›®

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä¸ºä¼ä¸šå†…éƒ¨ç³»ç»Ÿï¼ŒåŒ…å«æ•æ„Ÿä¸šåŠ¡é€»è¾‘ï¼Œè¯·å‹¿å¤–ä¼ ã€‚
