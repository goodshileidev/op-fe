# 系统架构文档

**文档编号**: ARCH-000
**创建时间**: 2025-11-26 12:10
**最后修改**: 2025-11-26 12:10
**执行模型**: claude-sonnet-4-5 (claude-sonnet-4-5-20250929)
**文档状态**: 生效中

---

## 修改历史

| 日期 | 修改人/模型 | 修改概要 |
|------|------------|---------|
| 2025-11-26 12:10 | claude-sonnet-4-5 | 创建架构文档索引 |

---

## 架构文档组织说明

本目录用于存放系统架构相关文档，包括但不限于：

### 1. 系统架构设计
- 整体架构图
- 技术栈选型
- 分层架构设计
- 模块划分

### 2. 数据架构
- 数据库设计
- 数据模型
- 数据流向
- 缓存策略

### 3. 部署架构
- 部署拓扑图
- 服务器配置
- 网络架构
- 负载均衡

### 4. 安全架构
- 认证授权机制
- 数据加密
- 安全防护
- 审计日志

---

## 当前系统架构概览

### 技术栈

| 层次 | 技术 | 版本 | 说明 |
|------|------|------|------|
| 前端框架 | React | 18.2.0 | UI 框架 |
| 应用框架 | Umi Max | 4.1.0 | 企业级应用框架 |
| 类型系统 | TypeScript | 4.9.5 | 静态类型检查 |
| UI 组件库 | Ant Design | 5.12.7 | 企业级 UI 组件 |
| 高级组件 | Pro Components | 2.6.44 | 业务组件 |
| 国际化 | i18next | latest | 多语言支持 |
| 富文本编辑 | Quill | 2.0.2 | 富文本编辑器 |
| 地图可视化 | @antv/l7 | 2.20.13 | 地理可视化 |

### 系统分层架构

```
┌─────────────────────────────────────────────────────────┐
│                    展示层 (Presentation)                  │
│  ┌──────────────────────────────────────────────────┐   │
│  │ React 组件 + Ant Design + Pro Components          │   │
│  │ - 页面组件 (pages/)                              │   │
│  │ - 公共组件 (components/)                         │   │
│  │ - 布局组件 (layouts/)                            │   │
│  └──────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                    业务逻辑层 (Service)                   │
│  ┌──────────────────────────────────────────────────┐   │
│  │ 业务服务 (common/service/)                        │   │
│  │ - DocumentService                                │   │
│  │ - FormService                                    │   │
│  │ - TemplateService                                │   │
│  └──────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                    数据访问层 (API)                       │
│  ┌──────────────────────────────────────────────────┐   │
│  │ API 接口定义 (common/api/)                        │   │
│  │ - HTTP 请求封装                                   │   │
│  │ - 请求拦截器                                      │   │
│  │ - 响应拦截器                                      │   │
│  └──────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                    后端服务 (Backend)                     │
│  ┌──────────────────────────────────────────────────┐   │
│  │ RESTful API 服务                                  │   │
│  │ - Spring Boot (推测)                              │   │
│  │ - MySQL 数据库                                    │   │
│  └──────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

### 核心模块

```
uniform-fe/
├── 表单管理模块 (form/)
│   ├── 文档管理 (document/)
│   ├── 表单实例 (form/)
│   └── 表单区块/问题 (form_section/, form_question/)
│
├── 模板管理模块 (template/)
│   ├── 文档模板 (document_template/)
│   ├── 表单模板 (form_template/)
│   └── 模板版本 (template_version/)
│
├── 业务操作模块 (operation/)
│   ├── 船舶作业 (ship_operation_document/)
│   ├── 安全检查 (monthly_security_check/)
│   └── 其他业务 (...)
│
└── 系统管理模块 (system/)
    ├── 用户管理 (user/)
    ├── 组织管理 (internal_org/, receipt_org/)
    └── 权限管理 (user_permission/)
```

---

## 架构原则

### 1. 分层原则
- **展示层**：只负责 UI 渲染和用户交互
- **业务逻辑层**：处理业务规则和数据转换
- **数据访问层**：封装 API 调用，统一错误处理

### 2. 模块化原则
- 按业务功能划分模块
- 模块间低耦合、高内聚
- 公共组件独立封装

### 3. 可维护性原则
- 代码规范统一（ESLint + Prettier）
- 类型安全（TypeScript 严格模式）
- 文档完善（代码注释 + 技术文档）

### 4. 性能优化原则
- 组件懒加载
- 代码分割
- 虚拟列表
- React.memo / useCallback / useMemo

---

## 扩展架构文档

详细的架构设计文档请参阅：

- **数据模型设计**: @docs/04-设计/01-data-model-refactor.md
- **场景管理**: @docs/04-设计/02-scenario-manager.md
- **字段类型系统**: @docs/04-设计/03-field-type-system.md
- **规则引擎**: @docs/04-设计/04-rule-engine.md
- **表单渲染器**: @docs/04-设计/05-form-renderer.md
- **场景配置**: @docs/04-设计/06-scenario-configuration.md

---

## 架构演进计划

### 当前架构 (v6.0)
- 港口航运专用系统
- 单一业务场景
- 静态字段配置

### 通用化架构 (v7.0 规划中)
- 跨行业通用平台
- 多场景支持
- 动态字段配置
- 场景适配层
- Connector 集成架构

详见：@docs/02-需求/PRODUCT_TRANSFORMATION_PLAN.md

---

**本目录后续会补充更详细的架构设计文档，包括架构图、时序图、部署图等。**
